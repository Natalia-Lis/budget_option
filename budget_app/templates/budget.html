{% extends "base.html" %}

{% block content %}

    <a href="{% url 'months-budget' %}"><strong>&nbsp;Dotychczasowe budżety -></strong></a><br>
    <br><br>
    Aktualne pozycje w Twoim budżecie:<br>
    <small>Jeśli coś już jest nieaktualne - wyrzuć pozycję!</small>
<br>
    <table border="1">
        <tr>
        <th>Nazwa</th>
        <th>Kwota</th>
        <th>Dopłata?</th>
        <th>Miesięcznie?</th>
        <th>Opis</th>
        <th>Obliczyć?</th>
        <th>Modyfikuj!</th>
            <th>Usuń</th>
</tr>
    {% for element in pozycje %}
        <tr>
        <td>{{ element.name }}</td>
        <td>{{ element.money }}</td>
        <td>
     <form action="" method="post">
         {% csrf_token %}
<input type="checkbox" name="dolicz{{ element.id }}"
onclick="document.getElementById('dodatkowo{{ element.id }}').style.display = this.checked ?
        'block' : 'none'; this.form.elements['{{ element.id }}'].disabled = !this.checked">
<div id="dodatkowo{{ element.id }}" style="display: none">
<input type="number" step="any" name="{{ element.id }}">
</div>
        </td>

        <td>{% if element.monthly == True %}
{#            <ul style="color: blue; list-style-type: circle;"><li>Tak</li></ul>#}
            Tak
            {% elif element.monthly == False %} &nbsp;
            {% endif %}</td>

        <td>{{ element.description }}</td>
        <td>
            {% if element.monthly == True %}
            <input type="checkbox" name="zapasowa" value="{{ element.money }}" checked>
            {% elif element.monthly == False %} &nbsp;
            <input type="checkbox" name="zapasowa" value="{{ element.money }}">
            {% endif %}

            </td>
        <td><a href="{% url 'modify-budget' element.id %}"> Modyfikuj!</a></td>
        <td><a href="{% url 'delete-budget' element.id %}"> Usuń</a></td>
        </tr>
    {% endfor %}
</table><input type="submit" value="oblicz wydatki">
     </form>
    <br>

        {% if my_sum %}    <br>
                Twoje obliczenia: {{ my_sum }}<br>
            <a href="{% url 'months-proposition' %}"><button>
            Zapisz Twoje wyliczenia jako wydatki na ten miesiąc
            </button></a><br>
    {% endif %}
<br><br>
         <form action="" method="post">
         {% csrf_token %}
               <fieldset>
                  <legend>Dodaj nową pozycję do budżetu</legend>

    Nazwa<input type="text" name="name"><br>
    Kwota min<input type="text" name="money"><br>

    Miesięcznie?<br>
             TAK<input type="radio" value="True" name="monthly"><br>
            NIE<input type="radio" value="False" name="monthly"><br>

    Dodatkowy opis<input type="text" name="description"><br>

         <input type="submit" value="send"></fieldset>
     </form>

{% endblock %}